apt-get install nano 	##Installs a text editor called nano. Only ever need to do once per new server install

##PARAMETERS START ##########
## This is the release number.  Please check what release you have installed and adjust if needed below.
export REMME_CORE_RELEASE=0.7.0-alpha
##Do not modify the line below
export REMME_CORE_PATH=/home/remme-core-$REMME_CORE_RELEASE
##Below is a startup script we create to make the start up call easier and one line.	
export startfile="/home/remmecommunity/start.sh"
export stopfile="/home/remmecommunity/stop.sh"	
##do not modify the line below
export rcstartup="/etc/rc.local"
##do not modify the line below
export isStartupConfiguredForStart=0 

##Just a few text colour parameters below: ignore them
export green=`tput setaf 2`
export red=`tput setaf 1`
export reset=`tput sgr0`

##PARAMETERS END ########


## Lets go to the home folder
cd /home/ 
## Lets make a directory called remmecommunity and not care if it exists
mkdir -p remmecommunity		
## Lets make the permissions relaxed for group members and the user who created it read,write and execute privs
chmod 770 remmecommunity
## Lets use this as our current directory for now
cd /home/remmecommunity


##Remove the file if it exists as we might be applying a new version number at the top of this script
##Creates a file chmod 770 start.shcalled start.sh which we will use to hold our startup command
##Gives the group members and the user who created it read,write and execute privs
if [ -f $startfile ]; then	
	echo "start.sh exists, we will remove and recreate it"
	rm $startfile	
	touch $startfile		
	chmod 770 $startfile	

	
else
	echo "start.sh flle doesnt exist, we will create it!"
	touch $startfile		
	chmod 770 $startfile		
fi


### Start of Create start.sh File ###
### We will create a start.sh file which we can easily execute with './home/remmecommunity/start.sh'###
echo '#!/bin/bash' >> "$startfile"
echo "cd $REMME_CORE_PATH" >> "$startfile"
echo "sudo make run_bg" >> "$startfile"

### End of Create File ###


if [ -f $stopfile ] ; then	
rm $stopfile
touch $stopfile
chmod 770 $stopfile
else
	echo "stop.sh flle doesnt exist, we will create it!"
	touch $stopfile		
	chmod 770 $stopfile	
fi

### Start of Create Stop.sh File ###
cd /home/remmecommunity/
echo '#!/bin/bash' >> "$stopfile"
echo "cd $REMME_CORE_PATH" >> "$stopfile"
echo "sudo make stop" >> "$stopfile"

### End of Create Stop.sh File ###







if [ -e $rcstartup ] ; then	
echo "startup file already exists - thats fine"
else
	echo "$rcstartup flle doesnt exist, we will create it!"
	touch $rcstartup	
	chmod 770 $stopfile	
fi


if grep -q "$startfile" "$rcstartup"; then
     echo "${green}Its already configured to start at startup! You're good to go!${reset}"
else
echo ".$startfile" >> "$rcstartup"
echo "${green}Complete ${reset}"
fi






